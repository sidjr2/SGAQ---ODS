<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://fonts.gstatic.com/s/i/materialicons/outlined/v24/24px.svg" type="image/svg+xml">
    <title>Agendamentos</title>
    <link rel="stylesheet" href="static/CadastroReservaCss.css">
    <link rel="stylesheet" href="/fullcalendar/lib/main.css">
    <!-- Adicione o link para o Font Awesome CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <script src="/fullcalendar/lib/main.js"></script>
</head>
<body>
<header>
    <nav>
        <a href="/"> <em> SGAQ </em>- SISTEMA DE GERENCIAMENTO DE ALOCAÇÃO DE QUADRA </a>
        <ul>
            <li><a href="#" title="Sobre">Sobre</a></li>
            <li><a href="#" title="Ajuda">Ajuda</a></li>
            <li class="user-icon" title="Perfil">
                <a href="/login">
                    <!-- Ícone de usuário do Font Awesome -->
                    <i class="fas fa-user"></i>
                </a>
            </li>
            <li title="Logout" >
                <a href="/logout" class="logout-link">
                    <!-- Ícone de saída do Font Awesome -->
                    <i class="fas fa-sign-out-alt"></i>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main>
    <!-- Will receive an object through ejs -->
    <h3 style="text-align: center;"> Olá, <%= user %></h3>

    <!-- Tabela de Usuários -->
    <div id="user-table">
        <table class="table">
            <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Departamento</th>
                <th>Matrícula</th>
                <th>Tipo</th>
                <th>Telefone</th>
                <th>Cidade</th>
                <th>Punição</th>
                <th>Reserva</th>
                <th>Prioridade</th>
                <th>Ações</th>
            </tr>
            </thead>
            <tbody>
            <!-- Os dados da tabela de usuários serão preenchidos aqui dinamicamente usando JavaScript -->
            </tbody>
        </table>
    </div>

    <!-- Tabela de Quadras -->
    <div id="quadra-table">
        <table class="table">
            <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Local</th>
                <th>Descrição</th>
                <th>Capacidade</th>
                <th>Reservado</th>
                <th>Ações</th>
            </tr>
            </thead>
            <tbody>
            <!-- Os dados da tabela de quadras serão preenchidos aqui dinamicamente usando JavaScript -->
            </tbody>
        </table>
    </div>

    <div class="data-box" id="new-data">
        <!-- ... (conteúdo do formulário omitido para brevidade) ... -->
    </div>

    <!-- This div will display the calendar -->
    <div id="calendar"></div>
    <div class="cards">
        <h2>Meus Eventos</h2>
        <ul class="events-list"></ul>
    </div>
</main>
<script>
    // Função para buscar e exibir a tabela de usuários
    function showUserTable() {
        // Realize uma requisição AJAX para buscar os dados JSON de usuários
        fetch('/user')
            .then(response => response.json())
            .then(data => {
                const userTable = document.querySelector('#user-table tbody');
                userTable.innerHTML = '';
                data.forEach(item => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
            <td>${item.id_User}</td>
            <td>${item.nome}</td>
            <td>${item.departamento}</td>
            <td>${item.matricula}</td>
            <td>${item.tipo}</td>
            <td>${item.telefone}</td>
            <td>${item.cidade}</td>
            <td>${item.punicao}</td>
            <td>${item.reserva}</td>
            <td>${item.prioridade}</td>
            <td>
              <i class="fas fa-edit"></i>
              <i class="fas fa-trash"></i>
            </td>
          `;
                    userTable.appendChild(row);
                });
            });
    }

    // Função para buscar e exibir a tabela de quadras
    function showQuadraTable() {
        // Realize uma requisição AJAX para buscar os dados JSON de quadras
        fetch('/quadra')
            .then(response => response.json())
            .then(data => {
                const quadraTable = document.querySelector('#quadra-table tbody');
                quadraTable.innerHTML = '';
                data.forEach(item => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
            <td>${item.id_Quadra}</td>
            <td>${item.quadra_name}</td>
            <td>${item.local}</td>
            <td>${item.descricao}</td>
            <td>${item.capacidade}</td>
            <td>${item.reservado}</td>
            <td>
              <i class="fas fa-edit"></i>
              <i class="fas fa-trash"></i>
              <i class="fas fa-plus"></i>
            </td>
          `;
                    quadraTable.appendChild(row);
                });
            });
    }

    // Chame as funções para exibir as tabelas quando a página carregar
    window.addEventListener('load', () => {
        showUserTable();
        showQuadraTable();
    });
</script>
</body>
</html>
